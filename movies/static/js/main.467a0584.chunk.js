(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={movieDetails:"MovieView_movieDetails__K2Mmx",posterAndInfoContainer:"MovieView_posterAndInfoContainer__dZIjz",tagline:"MovieView_tagline__342k-",poster:"MovieView_poster__JI5yO",trailer:"MovieView_trailer__vx4Zn",genres:"MovieView_genres__3Q71W",overview:"MovieView_overview__2UNnq",buttonRow:"MovieView_buttonRow__1XbxF"}},13:function(e,t,n){e.exports={app:"App_app__3TUDt",main:"App_main__xVsub",header:"App_header__1jZGZ",logo:"App_logo__3Fe0O",headerMenu:"App_headerMenu__24eLE",activeLink:"App_activeLink__3vyJW"}},17:function(e,t,n){e.exports={searchInput:"SearchView_searchInput__aPLgs",filmList:"SearchView_filmList__3hpDA",fadeIn:"SearchView_fadeIn__1IppW",poster:"SearchView_poster__f-Yag",loadingText:"SearchView_loadingText__3X2CB",fadeInLoadingText:"SearchView_fadeInLoadingText__1_rEl"}},22:function(e,t,n){e.exports=n.p+"static/media/favourite.b31d5567.svg"},23:function(e,t,n){e.exports=n.p+"static/media/watchlist.d713f9a2.svg"},28:function(e,t,n){e.exports={listTitle:"ListView_listTitle__2s7-C",movieList:"ListView_movieList__1y2gx"}},35:function(e,t,n){e.exports=n.p+"static/media/search.74737a6f.svg"},42:function(e,t,n){e.exports=n(57)},47:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(33),s=n.n(i),o=(n(47),n(15)),l=n(34),c=n(4),u=n(5),h=n(25),v=n(19),f=n(9),p=n(20),d=n(35),m=n.n(d),g=n(22),b=n.n(g),w=n(23),y=n.n(w),k=n(10),x=n.n(k);function S(e){var t=e.movieDetails||{id:null,title:null,tagline:null,poster:null,backdrop:null,overview:null,genres:[],youtubeTrailer:null};Object(r.useEffect)(function(){var n=e.loadMovieDetails;t.id!==e.movieId&&Number.isSafeInteger(e.movieId)&&n(e.movieId)},[t.id,e.loadMovieDetails,e.movieId]);var n=t.backdrop?"url("+t.backdrop+"), radial-gradient(rgba(0%,0%,0%,0.8), rgba(0%,0%,0%,1))":"none";return a.a.createElement("section",{className:x.a.movieDetails,style:{backgroundImage:n}},a.a.createElement("div",{className:x.a.posterAndInfoContainer},a.a.createElement("img",{className:x.a.poster,src:t.poster,alt:"Poster"}),a.a.createElement("div",null,a.a.createElement("div",{className:x.a.buttonRow},a.a.createElement("button",{onClick:function(){e.inWatchlist?e.removeFromList("watchlist"):e.addToList("watchlist")},"data-inlist":e.inWatchlist},a.a.createElement("img",{src:y.a,alt:e.inWatchlist?"Remove from watchlist":"Add to watchlist"})),a.a.createElement("button",{onClick:function(){e.inFavourites?e.removeFromList("favourites"):e.addToList("favourites")},"data-inlist":e.inFavourites},a.a.createElement("img",{src:b.a,alt:e.inFavourites?"Remove from favourites":"Add to favourites"}))),a.a.createElement("h2",null,t.title),a.a.createElement("p",{className:x.a.tagline},t.tagline),a.a.createElement("ul",{className:x.a.genres},t.genres.map(function(e,t){return a.a.createElement("li",{key:t},e)})),a.a.createElement("p",{className:x.a.overview},t.overview),t.youtubeTrailer&&a.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+encodeURIComponent(t.youtubeTrailer),allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Trailer",className:x.a.trailer}))))}var E=n(17),_=n.n(E),O=n(36),R=n.n(O),A=n(37),j=n.n(A),M=n(11),L=n(16),N=n(1),I=n.n(N),C=n(2),T=n(26),D=n(41),W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function F(e){var t=NaN;if("string"===typeof e){var n=/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) ([A-Za-z]{3}) (\d{4,}) (\d\d):(\d\d):(\d\d) GMT$/.exec(e);if(null!==n){var r=Object(L.a)(n,7),a=r[1],i=r[2],s=r[3],o=r[4],l=r[5],c=r[6],u=0;+c>59&&(u=59-c,c="59");var h=W.indexOf(i);if(h>=0){var v="";v+="+"+s.padStart(6,"0"),v+="-"+String(h+1).padStart(2,"0"),v+="-"+a.padStart(2,"0"),v+="T"+o.padStart(2,"0"),v+=":"+l.padStart(2,"0"),v+=":"+c.padStart(2,"0"),v+="Z",t=Math.trunc(Date.parse(v)/1e3)+u}}}return t}var P=n(38);function V(e){return q.apply(this,arguments)}function q(){return(q=Object(C.a)(I.a.mark(function e(t){var n,r=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,!(t>0)){e.next=4;break}return Z(n),e.abrupt("return",new Promise(function(e,r){var a=function e(){clearTimeout(i),n.removeEventListener("abort",e),r(new DOMException("Aborted","AbortError"))};n&&n.addEventListener("abort",a);var i=setTimeout(function(){n&&n.removeEventListener("abort",a),e()},1e3*t)}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return U.apply(this,arguments)}function U(){return(U=Object(C.a)(I.a.mark(function e(){var t,n,r,a=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),r=0;r<t;r++)n[r]=a[r];if(!(n.length>1)){e.next=5;break}return e.abrupt("return",G(function(e){return B(e)}));case 5:if(1!==n.length){e.next=8;break}return Z(n[0]),e.abrupt("return",new Promise(function(e,t){n[0].addEventListener("abort",function e(){n[0].removeEventListener("abort",e),t(new DOMException("Aborted","AbortError"))})}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return J.apply(this,arguments)}function J(){return(J=Object(C.a)(I.a.mark(function e(t){var n,r,a,i,s,o,l=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=l[a];if(r.length){e.next=3;break}return e.abrupt("return",t);case 3:return i=new AbortController,s=!1,o=B.apply(void 0,[i.signal].concat(r)).finally(function(){s=!0}),e.prev=6,e.next=9,Promise.race([t,o]);case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,s?t.catch(function(e){if(!(e instanceof DOMException)||"AbortError"!==e.name)throw e}):o.catch(function(e){}),i.abort(),e.finish(10);case 14:case"end":return e.stop()}},e,null,[[6,,10,14]])}))).apply(this,arguments)}var X=function(){function e(){Object(c.a)(this,e),this.promise=null}return Object(u.a)(e,[{key:"runExclusively",value:function(){var e=Object(C.a)(I.a.mark(function e(t){var n,r,a,i,s=this,o=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length>1&&void 0!==o[1]&&o[1],r=o.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=o[i];case 2:if(null===this.promise){e.next=13;break}return e.prev=3,e.next=6,z.apply(void 0,[this.promise].concat(a));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:Z(a),e.next=2;break;case 13:return this.promise=Object(C.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,0;case 2:return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,s.promise=null,e.finish(6);case 9:case"end":return e.stop()}},e,null,[[2,,6,9]])}))(),e.abrupt("return",n?this.promise:z.apply(void 0,[this.promise].concat(a)));case 15:case"end":return e.stop()}},e,this,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"locked",value:function(){return this.locked}}]),e}();function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.some(function(e){return e&&e.aborted})&&new DOMException("Aborted","AbortError")}var $=function(){function e(){Object(c.a)(this,e),this.listenerFunction=this.onAbortSignal.bind(this);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.inputSignals=n.filter(function(e){return!!e});var a=!1,i=!0,s=!1,o=void 0;try{for(var l,u=this.inputSignals[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value;h.addEventListener("abort",this.listenerFunction),a=a||h.aborted}}catch(v){s=!0,o=v}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}this.controller=new AbortController,a&&this.controller.abort()}return Object(u.a)(e,[{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.inputSignals[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.removeEventListener("abort",this.listenerFunction)}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.inputSignals=[]}},{key:"onAbortSignal",value:function(){this.destroy(),this.controller.abort()}},{key:"signal",get:function(){return this.controller.signal}}]),e}();function G(e){return K.apply(this,arguments)}function K(){return(K=Object(C.a)(I.a.mark(function e(t){var n,r,a,i,s=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=s[a];return i=Object(P.a)($,r),e.prev=2,e.next=5,t(i.signal);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,i.destroy(),e.finish(6);case 9:case"end":return e.stop()}},e,null,[[2,,6,9]])}))).apply(this,arguments)}var Y=function(){function e(){Object(c.a)(this,e),this.requestLimit=10,this.remaining=this.requestLimit,this.timeBetweenResets=1,this.nextReset=performance.now()+this.timeBetweenResets,this.lastResponseServerTime=-1/0}return Object(u.a)(e,[{key:"responseReceived",value:function(t){var n=e.interpretResponse(t,this.lastResponseServerTime),r=n.error,a=n.nextResetIn,i=n.requestLimit,s=n.remaining,o=n.serverTime,l=n.gotLimit;r?console.warn("Missing/bad header fields in response %o",t):(this.lastResponseServerTime=o,this.nextReset=performance.now()/1e3+a,Number.isNaN(s)||(this.remaining=s),l&&(this.requestLimit=i,s>=i-1&&(this.timeBetweenResets=a)))}},{key:"limit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.remaining<this.requestLimit){var t=performance.now()/1e3;t>=this.nextReset&&(this.nextReset=t+this.timeBetweenResets,this.remaining=this.requestLimit)}var n=Math.min(Math.max(0,Math.trunc(e)),this.remaining);return this.remaining-=n,n}},{key:"timeToWait",value:function(){return this.remaining>0?0:Math.max(0,this.nextReset-performance.now()/1e3)}},{key:"waitToSendOne",value:function(){var e=Object(C.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.limit(1)){e.next=5;break}return e.next=3,V(this.timeToWait(),t);case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"interpretResponse",value:function(e,t){var n=e.headers,r=!0,a=NaN,i=NaN,s=NaN,o=NaN,l=!1,c=F(n.get("Date"));if(c>=t||Number.isNaN(c))if(o=Number.isNaN(c)?Date.UTC()/1e3:c,429===e.status||503===e.status){var u=n.get("Retry-After");(a=/^(0|[1-9]\d*)$/.test(u)?+u:F(u)-o)<=0&&(a=0),s=0,r=!1}else{var h=parseInt(n.get("X-RateLimit-Limit"));if(Number.isSafeInteger(h)&&h>=1){var v=Math.min(Number.MAX_SAFE_INTEGER,Math.max(0,parseInt(n.get("X-RateLimit-Remaining")))),f=parseInt(n.get("X-RateLimit-Reset"));Number.isSafeInteger(v)&&!Number.isNaN(f)&&(f+86400>o&&(f-=o),s=v,i=h,a=Math.max(0,f),l=!0,r=!1)}}else o=t,r=!1;return{error:r,nextResetIn:a,requestLimit:i,remaining:s,serverTime:o,gotLimit:l}}}]),e}(),Q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";Object(c.a)(this,e),this.limiter=new Y,this.apiKey=t,this.timeout=null,this.configuration=null,this.configurationMutex=new X,this.language=r,this.signalForAllWork=n}return Object(u.a)(e,[{key:"getMovieDetails",value:function(){var e=Object(C.a)(I.a.mark(function e(t){var n,r,a,i,s,o=this,l=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2&&void 0!==l[2]?l[2]:null,e.next=4,this.queryServer("movie/"+t,{language:this.language,append_to_response:"videos"},r);case 4:if((a=e.sent).genres instanceof Array&&a.videos instanceof Object&&a.videos.results instanceof Array){e.next=7;break}throw new Error("Bad reply");case 7:return i=a.videos.results.find(function(e){return e instanceof Object&&"YouTube"===e.site&&"Trailer"===e.type&&"string"===typeof e.key})||null,e.next=10,this.getImageBasePaths(n,r);case 10:return s=e.sent,e.abrupt("return",{id:t,title:String(a.title),tagline:null===a.tagline?null:String(a.tagline),overview:null===a.overview?null:String(a.overview),genres:a.genres.map(function(e){return String(e.name)}).sort(function(e,t){return e.localeCompare(t,o.language)}),runtime:null===a.runtime?null:a.runtime,youtubeTrailer:null===i?null:i.key,poster:null===a.poster_path?null:s.posters+String(a.poster_path),backdrop:null===a.backdrop_path?null:s.backdrops+String(a.backdrop_path)});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchMovies",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(D.a)(I.a.mark(function r(){var a;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(""===e){r.next=5;break}return r.delegateYield(I.a.mark(function r(){var a,i,s,o,l,c,u,h,v,f,p,d;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.signal,i=void 0===a?null:a,s=n.firstPage,o=void 0===s?0:s,l=n.posterWidth,c=void 0===l?1/0:l,r.next=3,Object(T.a)(t.getImageBasePaths({posters:c},i));case 3:u=r.sent.posters,h=new Set,v=[],f=o,p=!0;case 8:return v=[],r.next=11,Object(T.a)(t.sendSearchMoviesRequest(e,f,i));case 11:if(d=r.sent,++f,p=+d.total_pages>f,d.results instanceof Array){r.next=16;break}throw new Error("Bad reply");case 16:if(!(d.results instanceof Array)){r.next=21;break}if(!(v=d.results.map(function(e){return t.buildSearchResultObject(e,u)}).filter(function(e){var t=e.id,n=h.has(t);return h.add(t),!n})).length||!p){r.next=21;break}return r.next=21,v;case 21:if(p){r.next=8;break}case 22:if(!v.length){r.next=24;break}return r.abrupt("return",{v:v});case 24:case"end":return r.stop()}},r)})(),"t0",2);case 2:if("object"!==typeof(a=r.t0)){r.next=5;break}return r.abrupt("return",a.v);case 5:case"end":return r.stop()}},r)}))()}},{key:"sendSearchMoviesRequest",value:function(){var e=Object(C.a)(I.a.mark(function e(t,n,r){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.queryServer("search/movie",{query:t,page:n+1,language:this.language},r));case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildSearchResultObject",value:function(e,t){return{id:Number(e.id)||0,title:String(e.title),poster:"string"!==typeof e.poster_path?null:t+String(e.poster_path),overview:null===e.overview?null:String(e.overview)}}},{key:"getConfiguration",value:function(){var e=Object(C.a)(I.a.mark(function e(){var t,n=this,r=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,e.abrupt("return",this.configurationMutex.runExclusively(Object(C.a)(I.a.mark(function e(){var t,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.configuration){e.next=8;break}return e.next=3,n.queryServer("configuration",{},n.signalForAllWork);case 3:if(t=e.sent,"object"===typeof(r=t.images)&&ee(r.poster_sizes)&&ee(r.backdrop_sizes)&&ee(r.profile_sizes)){e.next=7;break}throw new Error("Bad reply");case 7:n.configuration={imagesBaseUrl:String(r.secure_base_url),imageSizes:{posters:r.poster_sizes,backdrops:r.backdrop_sizes,profiles:r.profile_sizes}};case 8:return e.abrupt("return",n.configuration);case 9:case"end":return e.stop()}},e)})),!1,this.signalForAllWork,t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"queryServer",value:function(){var e=Object(C.a)(I.a.mark(function e(t){var n,r,a=this,i=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:null,e.abrupt("return",G(function(){var e=Object(C.a)(I.a.mark(function e(r){var i,s,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=te(t,n,"https://api.themoviedb.org/3/",{api_key:a.apiKey}),e.next=3,a.limiter.waitToSendOne(r);case 3:return e.next=5,fetch(new Request(i.href),{signal:r});case 5:if(s=e.sent,a.limiter.responseReceived(s),e.t0=!s.ok,e.t0){e.next=14;break}return e.next=11,s.json();case 11:e.t1=o=e.sent,e.t2=Object,e.t0=!(e.t1 instanceof e.t2);case 14:if(!e.t0){e.next=17;break}throw console.warn("TmdbClient - bad response: %o",s),new Error("Bad response");case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r,this.signalForAllWork));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getImageBasePaths",value:function(){var e=Object(C.a)(I.a.mark(function e(t){var n,r,a,i,s,o,l,c,u,h,v,f,p,d,m,g,b,w=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.length>1&&void 0!==w[1]?w[1]:null,e.next=3,this.getConfiguration(n);case 3:r=e.sent,a=r.imagesBaseUrl,i=r.imageSizes,s={},o=0,l=["posters","backdrops","profiles"];case 8:if(!(o<l.length)){e.next=36;break}if(c=l[o],u="original",!(c in t)){e.next=32;break}for(h=1/0,v=!0,f=!1,p=void 0,e.prev=16,d=i[c][Symbol.iterator]();!(v=(m=d.next()).done);v=!0)g=m.value,/^w\d+$/.test(g)&&(b=parseInt(g.substr(1)))>=t[c]&&b<h&&(u=g,h=b);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),f=!0,p=e.t0;case 24:e.prev=24,e.prev=25,v||null==d.return||d.return();case 27:if(e.prev=27,!f){e.next=30;break}throw p;case 30:return e.finish(27);case 31:return e.finish(24);case 32:s[c]=a+u;case 33:o++,e.next=8;break;case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),H=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!0},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;Object(c.a)(this,e),this.tmdb=t,this.abortController=new AbortController,this.filter=r,this.onResultsReceived=n,this.posterWidth=a,this.loading=!1,this.generator=null,this.firstResults=!0}return Object(u.a)(e,[{key:"newSearch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.stop(),this.firstResults=!0,this.generator=this.tmdb.searchMovies(e,{firstPage:0,posterWidth:this.posterWidth,signal:this.abortController.signal}),V(n,this.abortController.signal).then(function(){t.loadMore()}).catch(function(){})}},{key:"reachedEnd",value:function(){return null===this.generator}},{key:"loadMore",value:function(){var e=this;if(!this.loading&&!this.reachedEnd()){var t=this.generator.next(),n=this.generator;t.then(function(t){var r=t.value,a=t.done;if(e.generator===n&&(e.loading=!1,a&&(e.generator=null),r||a)){var i=r?r.filter(e.filter):[];if(i.length||a){var s=e.firstResults;e.firstResults=!1,e.onResultsReceived(i,s,a,null)}else e.load()}}),t.catch(function(t){e.generator!==n||t instanceof DOMException&&"AbortError"===t.name||(e.onResultsReceived([],e.firstResults,!1,t),e.loading=!1,console.error("Search failed: %o",t))})}}},{key:"stop",value:function(){this.loading=!1,this.generator=null,this.abortController.abort(),this.abortController=new AbortController}}]),e}();function ee(e){return e instanceof Array&&e.every(function(e){return"string"===typeof e})}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=new URL(e,n),i=!0,s=!1,o=void 0;try{for(var l,c=new URLSearchParams(t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,h=Object(L.a)(u,2),v=h[0],f=h[1];a.searchParams.set(v,f)}}catch(S){s=!0,o=S}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}var p=!0,d=!1,m=void 0;try{for(var g,b=new URLSearchParams(r)[Symbol.iterator]();!(p=(g=b.next()).done);p=!0){var w=g.value,y=Object(L.a)(w,2),k=y[0],x=y[1];a.searchParams.set(k,x)}}catch(S){d=!0,m=S}finally{try{p||null==b.return||b.return()}finally{if(d)throw m}}return a}var ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={searchString:e.searchString||"",searchResults:[],moreSearchResultsAvailable:!1},n.searcher=new H(e.tmdbClient,n.receivedSearchResults.bind(Object(f.a)(n)),function(e){return!!e.poster},320*devicePixelRatio),n.loadMoreResults=n.loadMoreResults.bind(Object(f.a)(n)),n.searchInputOnChange=n.searchInputOnChange.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.searcher.newSearch(this.state.searchString)}},{key:"searchInputOnChange",value:function(e){var t=e.target.value;this.setState({searchString:t}),this.searcher.newSearch(t,.35),this.props.searchStringChanged(t)}},{key:"loadMoreResults",value:function(){this.searcher.loadMore()}},{key:"componentWillUnmount",value:function(){this.searcher.stop()}},{key:"receivedSearchResults",value:function(e,t,n,r){this.setState(function(a){return{searchResults:t?e:[].concat(Object(o.a)(a.searchResults),Object(o.a)(e)),moreSearchResultsAvailable:!n&&!r}})}},{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("input",{type:"search",className:_.a.searchInput,value:this.state.searchString,onChange:this.searchInputOnChange,maxLength:"140",autoFocus:!0,placeholder:"Type the name of a movie..."}),a.a.createElement(j.a,{dataLength:this.state.searchResults.length,next:this.loadMoreResults,hasMore:this.state.moreSearchResultsAvailable,scrollThreshold:"600px",loader:a.a.createElement("p",{className:_.a.loadingText},"One second...")},a.a.createElement("ul",{className:_.a.filmList},this.state.searchResults.map(function(e,t){var n=e.id,r=e.title,i=e.poster,s=e.overview;return a.a.createElement("li",{key:n},a.a.createElement(M.b,{to:"/movie/"+n},a.a.createElement("h2",{title:r},r),a.a.createElement("img",{src:i,className:_.a.poster,alt:"Poster for "+r}),a.a.createElement(R.a,{line:4,element:"p",text:s,title:s,maxCalculateTimes:8})))}))))}}]),t}(a.a.Component);function re(){return a.a.createElement("section",null,"Page Not Found")}var ae=n(28),ie=n.n(ae);function se(e){return a.a.createElement("section",null,a.a.createElement("h2",{className:ie.a.listTitle},e.listTitle),a.a.createElement("ul",{className:ie.a.movieList},e.items.map(function(e){var t=e.id,n=e.title,r=e.poster;return a.a.createElement(M.b,{to:"/movie/"+t,key:t},a.a.createElement("li",null,a.a.createElement("p",null,n),a.a.createElement("img",{src:r,alt:"Poster"})))})))}var oe=n(13),le=n.n(oe),ce=n(12),ue="Movies.Lists",he="c4f2cf342c77c4f9252c1c663abb4937";function ve(e){return a.a.createElement("header",{className:le.a.header},a.a.createElement("img",{src:"/favicon.svg",className:le.a.logo,alt:"Logo"}),a.a.createElement("h1",null,"Movies"),a.a.createElement(fe,{views:e.views}))}function fe(e){return a.a.createElement("nav",{className:le.a.headerMenu},e.views.map(function(e,t){var n=e.linkAddress,r=e.linkIcon,i=e.linkText,s=e.paths;return null!==n&&a.a.createElement("p",{key:t},a.a.createElement(M.c,{to:n,isActive:function(e,t){var n=t.pathname;return!!Object(ce.e)(n,{path:s,exact:!0,strict:!1})},activeClassName:le.a.activeLink,exact:!0},a.a.createElement("img",{src:r,alt:i})))}))}var pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).tmdbClientAbortController=new AbortController,n.tmdbClient=new Q(he,n.tmdbClientAbortController.signal,"en"),n.state={lists:JSON.parse(localStorage.getItem(ue))||{favourites:[],watchlist:[]},movieDetails:null},n.loadMovieDetails=n.loadMovieDetails.bind(Object(f.a)(n)),n.movieId=null,n.views=[{linkAddress:"/",linkIcon:m.a,linkText:"Search",paths:["/","/search/:searchString?"],render:function(e){return a.a.createElement(ne,{tmdbClient:n.tmdbClient,searchString:e.match.params.searchString,searchStringChanged:function(t){e.history.replace("/search/"+encodeURIComponent(t))}})}},{linkAddress:null,linkIcon:null,linkText:null,paths:["/movie/:movieId"],render:function(e){return a.a.createElement(S,{movieDetails:n.state.movieDetails,movieId:Number(e.match.params.movieId),loadMovieDetails:n.loadMovieDetails,inFavourites:!!n.state.movieDetails&&!!n.state.lists.favourites.find(function(e){return e.id===n.state.movieDetails.id}),inWatchlist:!!n.state.movieDetails&&!!n.state.lists.watchlist.find(function(e){return e.id===n.state.movieDetails.id}),addToList:function(e){n.state.movieDetails&&n.addMovieToList(e,n.state.movieDetails)},removeFromList:function(e){n.state.movieDetails&&n.removeMovieFromList(e,n.state.movieDetails.id)}})}},{linkAddress:"/watchlist",linkIcon:y.a,linkText:"Watchlist",paths:["/watchlist"],render:function(e){return a.a.createElement(se,{listTitle:"Watchlist",items:n.state.lists.watchlist})}},{linkAddress:"/favourites",linkIcon:b.a,linkText:"Favourites",paths:["/favourites"],render:function(e){return a.a.createElement(se,{listTitle:"Favourites",items:n.state.lists.favourites})}},{linkAddress:null,linkIcon:null,linkText:null,paths:null,render:re}],n.onStorage=n.onStorage.bind(Object(f.a)(n)),window.addEventListener("storage",n.onStorage),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.tmdbClientAbortController.abort(),window.removeEventListener("storage",this.onStorage)}},{key:"onStorage",value:function(e){var t=e.key,n=e.storageArea,r=e.newValue;n===localStorage&&t===ue&&this.setState({lists:JSON.parse(r)})}},{key:"loadMovieDetails",value:function(e){var t=this;this.setState({movieDetails:null}),this.movieId=e,this.loadMovieDetailsAbortController=new AbortController;var n=this.loadMovieDetailsAbortController.signal;this.tmdbClient.getMovieDetails(e,{posters:400*devicePixelRatio,backdrops:1920*devicePixelRatio},n).then(function(n){t.movieId===e&&t.setState({movieDetails:n})})}},{key:"modifyList",value:function(e,t){this.setState(function(n){var r=n.lists,a=Object(l.a)({},r);return a[e]=Object(o.a)(a[e]),t(a[e]),localStorage.setItem(ue,JSON.stringify(a)),{lists:a}})}},{key:"addMovieToList",value:function(e,t){var n=t.id,r=t.title,a=t.poster;this.modifyList(e,function(e){if(!e.find(function(e){return e.id===n})){var t=e.findIndex(function(e){return-1===r.localeCompare(e.title)});-1===t&&(t=e.length),e.splice(t,0,{id:n,title:r,poster:a})}})}},{key:"removeMovieFromList",value:function(e,t){this.modifyList(e,function(e){var n=e.findIndex(function(e){return e.id===t});-1!==n&&e.splice(n,1)})}},{key:"render",value:function(){return a.a.createElement(M.a,null,a.a.createElement("div",{className:le.a.app},a.a.createElement(ve,{views:this.views}),a.a.createElement("main",{className:le.a.main},a.a.createElement(ce.c,null,this.views.map(function(e,t){var n=e.paths,r=e.render;return a.a.createElement(ce.a,{key:t,path:n,exact:!0,render:r})})))))}}]),t}(a.a.Component),de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(a.a.createElement(pe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");de?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):me(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):me(t,e)})}}()}},[[42,1,2]]]);
//# sourceMappingURL=main.467a0584.chunk.js.map