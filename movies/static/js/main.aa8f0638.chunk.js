(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,r){e.exports={movieDetails:"MovieView_movieDetails__K2Mmx",posterAndInfoContainer:"MovieView_posterAndInfoContainer__dZIjz",tagline:"MovieView_tagline__342k-",poster:"MovieView_poster__JI5yO",trailer:"MovieView_trailer__vx4Zn",genres:"MovieView_genres__3Q71W",overview:"MovieView_overview__2UNnq",buttonRow:"MovieView_buttonRow__1XbxF"}},13:function(e,t,r){e.exports={app:"App_app__3TUDt",main:"App_main__xVsub",header:"App_header__1jZGZ",logo:"App_logo__3Fe0O",headerMenu:"App_headerMenu__24eLE",activeLink:"App_activeLink__3vyJW"}},17:function(e,t,r){e.exports={searchInput:"SearchView_searchInput__aPLgs",filmList:"SearchView_filmList__3hpDA",fadeIn:"SearchView_fadeIn__1IppW",poster:"SearchView_poster__f-Yag",loadingText:"SearchView_loadingText__3X2CB",fadeInLoadingText:"SearchView_fadeInLoadingText__1_rEl"}},22:function(e,t,r){e.exports=r.p+"static/media/favourite.b31d5567.svg"},23:function(e,t,r){e.exports=r.p+"static/media/watchlist.d713f9a2.svg"},28:function(e,t,r){e.exports={listTitle:"ListView_listTitle__2s7-C",movieList:"ListView_movieList__1y2gx"}},35:function(e,t,r){e.exports=r.p+"static/media/search.74737a6f.svg"},42:function(e,t,r){e.exports=r(57)},47:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(33),s=r.n(i),o=(r(47),r(15)),l=r(34),c=r(4),u=r(5),h=r(25),v=r(19),f=r(9),p=r(20),m=r(35),d=r.n(m),g=r(22),b=r.n(g),w=r(23),y=r.n(w),k=r(10),x=r.n(k);function S(e){var t=e.movieDetails||{id:null,title:null,tagline:null,poster:null,backdrop:null,overview:null,genres:[],youtubeTrailer:null};Object(n.useEffect)(function(){var r=e.loadMovieDetails;t.id!==e.movieId&&Number.isSafeInteger(e.movieId)&&r(e.movieId)},[t.id,e.loadMovieDetails,e.movieId]);var r=t.backdrop?"url("+t.backdrop+"), radial-gradient(rgba(0%,0%,0%,0.8), rgba(0%,0%,0%,1))":"none";return a.a.createElement("section",{className:x.a.movieDetails,style:{backgroundImage:r}},a.a.createElement("div",{className:x.a.posterAndInfoContainer},a.a.createElement("img",{className:x.a.poster,src:t.poster,alt:"Poster"}),a.a.createElement("div",null,a.a.createElement("div",{className:x.a.buttonRow},a.a.createElement("button",{onClick:function(){e.inWatchlist?e.removeFromList("watchlist"):e.addToList("watchlist")},"data-inlist":e.inWatchlist},a.a.createElement("img",{src:y.a,alt:e.inWatchlist?"Remove from watchlist":"Add to watchlist"})),a.a.createElement("button",{onClick:function(){e.inFavourites?e.removeFromList("favourites"):e.addToList("favourites")},"data-inlist":e.inFavourites},a.a.createElement("img",{src:b.a,alt:e.inFavourites?"Remove from favourites":"Add to favourites"}))),a.a.createElement("h2",null,t.title),a.a.createElement("p",{className:x.a.tagline},t.tagline),a.a.createElement("ul",{className:x.a.genres},t.genres.map(function(e,t){return a.a.createElement("li",{key:t},e)})),a.a.createElement("p",{className:x.a.overview},t.overview),t.youtubeTrailer&&a.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+encodeURIComponent(t.youtubeTrailer),allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Trailer",className:x.a.trailer}))))}var _=r(17),E=r.n(_),O=r(36),R=r.n(O),A=r(37),M=r.n(A),j=r(11),L=r(16),N=r(1),I=r.n(N),T=r(2),C=r(26),D=r(41),F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function W(e){var t=NaN;if("string"===typeof e){var r=/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) ([A-Za-z]{3}) (\d{4,}) (\d\d):(\d\d):(\d\d) GMT$/.exec(e);if(null!==r){var n=Object(L.a)(r,7),a=n[1],i=n[2],s=n[3],o=n[4],l=n[5],c=n[6],u=0;+c>59&&(u=59-c,c="59");var h=F.indexOf(i);if(h>=0){var v="";v+="+"+s.padStart(6,"0"),v+="-"+String(h+1).padStart(2,"0"),v+="-"+a.padStart(2,"0"),v+="T"+o.padStart(2,"0"),v+=":"+l.padStart(2,"0"),v+=":"+c.padStart(2,"0"),v+="Z",t=Math.trunc(Date.parse(v)/1e3)+u}}}return t}var P=r(38);function V(e){return q.apply(this,arguments)}function q(){return(q=Object(T.a)(I.a.mark(function e(t){var r,n=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:null,!(t>0)){e.next=4;break}return Z(r),e.abrupt("return",new Promise(function(e,n){var a=function e(){clearTimeout(i),r.removeEventListener("abort",e),n(new DOMException("Aborted","AbortError"))};r&&r.addEventListener("abort",a);var i=setTimeout(function(){r&&r.removeEventListener("abort",a),e()},1e3*t)}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return U.apply(this,arguments)}function U(){return(U=Object(T.a)(I.a.mark(function e(){var t,r,n,a=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];if(!(r.length>1)){e.next=5;break}return e.abrupt("return",G(function(e){return B(e)}));case 5:if(1!==r.length){e.next=8;break}return Z(r[0]),e.abrupt("return",new Promise(function(e,t){r[0].addEventListener("abort",function e(){r[0].removeEventListener("abort",e),t(new DOMException("Aborted","AbortError"))})}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return J.apply(this,arguments)}function J(){return(J=Object(T.a)(I.a.mark(function e(t){var r,n,a,i,s,o,l=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=l[a];if(n.length){e.next=3;break}return e.abrupt("return",t);case 3:return i=new AbortController,s=!1,o=B.apply(void 0,[i.signal].concat(n)).finally(function(){s=!0}),e.prev=6,e.next=9,Promise.race([t,o]);case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,s?t.catch(function(e){if(!(e instanceof DOMException)||"AbortError"!==e.name)throw e}):o.catch(function(e){}),i.abort(),e.finish(10);case 14:case"end":return e.stop()}},e,null,[[6,,10,14]])}))).apply(this,arguments)}var X=function(){function e(){Object(c.a)(this,e),this.promise=null}return Object(u.a)(e,[{key:"runExclusively",value:function(){var e=Object(T.a)(I.a.mark(function e(t){var r,n,a,i,s=this,o=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=o.length>1&&void 0!==o[1]&&o[1],n=o.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=o[i];case 2:if(null===this.promise){e.next=13;break}return e.prev=3,e.next=6,z.apply(void 0,[this.promise].concat(a));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:Z(a),e.next=2;break;case 13:return this.promise=Object(T.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,0;case 2:return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,s.promise=null,e.finish(6);case 9:case"end":return e.stop()}},e,null,[[2,,6,9]])}))(),e.abrupt("return",r?this.promise:z.apply(void 0,[this.promise].concat(a)));case 15:case"end":return e.stop()}},e,this,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"locked",value:function(){return this.locked}}]),e}();function Z(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.some(function(e){return e&&e.aborted})&&new DOMException("Aborted","AbortError")}var $=function(){function e(){Object(c.a)(this,e),this.listenerFunction=this.onAbortSignal.bind(this);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.inputSignals=r.filter(function(e){return!!e});var a=!1,i=!0,s=!1,o=void 0;try{for(var l,u=this.inputSignals[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value;h.addEventListener("abort",this.listenerFunction),a=a||h.aborted}}catch(v){s=!0,o=v}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}this.controller=new AbortController,a&&this.controller.abort()}return Object(u.a)(e,[{key:"destroy",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,a=this.inputSignals[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){n.value.removeEventListener("abort",this.listenerFunction)}}catch(i){t=!0,r=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this.inputSignals=[]}},{key:"onAbortSignal",value:function(){this.destroy(),this.controller.abort()}},{key:"signal",get:function(){return this.controller.signal}}]),e}();function G(e){return K.apply(this,arguments)}function K(){return(K=Object(T.a)(I.a.mark(function e(t){var r,n,a,i,s=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=s.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=s[a];return i=Object(P.a)($,n),e.prev=2,e.next=5,t(i.signal);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,i.destroy(),e.finish(6);case 9:case"end":return e.stop()}},e,null,[[2,,6,9]])}))).apply(this,arguments)}var Y=function(){function e(){Object(c.a)(this,e),this.requestLimit=10,this.remaining=this.requestLimit,this.timeBetweenResets=1,this.nextReset=performance.now()+this.timeBetweenResets,this.lastResponseServerTime=-1/0}return Object(u.a)(e,[{key:"responseReceived",value:function(t){var r=e.interpretResponse(t,this.lastResponseServerTime),n=r.error,a=r.nextResetIn,i=r.requestLimit,s=r.remaining,o=r.serverTime,l=r.gotLimit;n?console.warn("Missing/bad header fields in response %o",t):(this.lastResponseServerTime=o,this.nextReset=performance.now()/1e3+a,Number.isNaN(s)||(this.remaining=s),l&&(this.requestLimit=i,s>=i-1&&(this.timeBetweenResets=a)))}},{key:"limit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.remaining<this.requestLimit){var t=performance.now()/1e3;t>=this.nextReset&&(this.nextReset=t+this.timeBetweenResets,this.remaining=this.requestLimit)}var r=Math.min(Math.max(0,Math.trunc(e)),this.remaining);return this.remaining-=r,r}},{key:"timeToWait",value:function(){return this.remaining>0?0:Math.max(0,this.nextReset-performance.now()/1e3)}},{key:"waitToSendOne",value:function(){var e=Object(T.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.limit(1)){e.next=5;break}return e.next=3,V(this.timeToWait(),t);case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"interpretResponse",value:function(e,t){var r=e.headers,n=!0,a=NaN,i=NaN,s=NaN,o=NaN,l=!1,c=W(r.get("Date"));if(c>=t||Number.isNaN(c))if(o=Number.isNaN(c)?Date.UTC()/1e3:c,429===e.status||503===e.status){var u=r.get("Retry-After");(a=/^(0|[1-9]\d*)$/.test(u)?+u:W(u)-o)<=0&&(a=0),s=0,n=!1}else{var h=parseInt(r.get("X-RateLimit-Limit"));if(Number.isSafeInteger(h)&&h>=1){var v=Math.min(Number.MAX_SAFE_INTEGER,Math.max(0,parseInt(r.get("X-RateLimit-Remaining")))),f=parseInt(r.get("X-RateLimit-Reset"));Number.isSafeInteger(v)&&!Number.isNaN(f)&&(f+86400>o&&(f-=o),s=v,i=h,a=Math.max(0,f),l=!0,n=!1)}}else o=t,n=!1;return{error:n,nextResetIn:a,requestLimit:i,remaining:s,serverTime:o,gotLimit:l}}}]),e}(),Q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";Object(c.a)(this,e),this.limiter=new Y,this.apiKey=t,this.timeout=null,this.configuration=null,this.configurationMutex=new X,this.language=n,this.signalForAllWork=r}return Object(u.a)(e,[{key:"getMovieDetails",value:function(){var e=Object(T.a)(I.a.mark(function e(t){var r,n,a,i,s,o=this,l=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=l.length>2&&void 0!==l[2]?l[2]:null,e.next=4,this.queryServer("movie/"+t,{language:this.language,append_to_response:"videos"},n);case 4:if((a=e.sent).genres instanceof Array&&a.videos instanceof Object&&a.videos.results instanceof Array){e.next=7;break}throw new Error("Bad reply");case 7:return i=a.videos.results.find(function(e){return e instanceof Object&&"YouTube"===e.site&&"Trailer"===e.type&&"string"===typeof e.key})||null,e.next=10,this.getImageBasePaths(r,n);case 10:return s=e.sent,e.abrupt("return",{id:t,title:String(a.title),tagline:null===a.tagline?null:String(a.tagline),overview:null===a.overview?null:String(a.overview),genres:a.genres.map(function(e){return String(e.name)}).sort(function(e,t){return e.localeCompare(t,o.language)}),runtime:null===a.runtime?null:a.runtime,youtubeTrailer:null===i?null:i.key,poster:null===a.poster_path?null:s.posters+String(a.poster_path),backdrop:null===a.backdrop_path?null:s.backdrops+String(a.backdrop_path)});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchMovies",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(D.a)(I.a.mark(function n(){var a;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e){n.next=5;break}return n.delegateYield(I.a.mark(function n(){var a,i,s,o,l,c,u,h,v,f,p,m;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.signal,i=void 0===a?null:a,s=r.firstPage,o=void 0===s?0:s,l=r.posterWidth,c=void 0===l?1/0:l,n.next=3,Object(C.a)(t.getImageBasePaths({posters:c},i));case 3:u=n.sent.posters,h=new Set,v=[],f=o,p=!0;case 8:return v=[],n.next=11,Object(C.a)(t.sendSearchMoviesRequest(e,f,i));case 11:if(m=n.sent,++f,p=+m.total_pages>f,m.results instanceof Array){n.next=16;break}throw new Error("Bad reply");case 16:if(!(m.results instanceof Array)){n.next=21;break}if(!(v=m.results.map(function(e){return t.buildSearchResultObject(e,u)}).filter(function(e){var t=e.id,r=h.has(t);return h.add(t),!r})).length||!p){n.next=21;break}return n.next=21,v;case 21:if(p){n.next=8;break}case 22:if(!v.length){n.next=24;break}return n.abrupt("return",{v:v});case 24:case"end":return n.stop()}},n)})(),"t0",2);case 2:if("object"!==typeof(a=n.t0)){n.next=5;break}return n.abrupt("return",a.v);case 5:case"end":return n.stop()}},n)}))()}},{key:"sendSearchMoviesRequest",value:function(){var e=Object(T.a)(I.a.mark(function e(t,r,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.queryServer("search/movie",{query:t,page:r+1,language:this.language},n));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"buildSearchResultObject",value:function(e,t){return{id:Number(e.id)||0,title:String(e.title),poster:"string"!==typeof e.poster_path?null:t+String(e.poster_path),overview:null===e.overview?null:String(e.overview)}}},{key:"getConfiguration",value:function(){var e=Object(T.a)(I.a.mark(function e(){var t,r=this,n=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,e.abrupt("return",this.configurationMutex.runExclusively(Object(T.a)(I.a.mark(function e(){var t,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.configuration){e.next=8;break}return e.next=3,r.queryServer("configuration",{},r.signalForAllWork);case 3:if(t=e.sent,"object"===typeof(n=t.images)&&ee(n.poster_sizes)&&ee(n.backdrop_sizes)&&ee(n.profile_sizes)){e.next=7;break}throw new Error("Bad reply");case 7:r.configuration={imagesBaseUrl:String(n.secure_base_url),imageSizes:{posters:n.poster_sizes,backdrops:n.backdrop_sizes,profiles:n.profile_sizes}};case 8:return e.abrupt("return",r.configuration);case 9:case"end":return e.stop()}},e)})),!1,this.signalForAllWork,t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"queryServer",value:function(){var e=Object(T.a)(I.a.mark(function e(t){var r,n,a=this,i=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2&&void 0!==i[2]?i[2]:null,e.abrupt("return",G(function(){var e=Object(T.a)(I.a.mark(function e(n){var i,s,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=te(t,r,"https://api.themoviedb.org/3/",{api_key:a.apiKey}),e.next=3,a.limiter.waitToSendOne(n);case 3:return e.next=5,fetch(new Request(i.href),{signal:n});case 5:if(s=e.sent,a.limiter.responseReceived(s),e.t0=!s.ok,e.t0){e.next=14;break}return e.next=11,s.json();case 11:e.t1=o=e.sent,e.t2=Object,e.t0=!(e.t1 instanceof e.t2);case 14:if(!e.t0){e.next=17;break}throw console.warn("TmdbClient - bad response: %o",s),new Error("Bad response");case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n,this.signalForAllWork));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getImageBasePaths",value:function(){var e=Object(T.a)(I.a.mark(function e(t){var r,n,a,i,s,o,l,c,u,h,v,f,p,m,d,g,b,w=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>1&&void 0!==w[1]?w[1]:null,e.next=3,this.getConfiguration(r);case 3:n=e.sent,a=n.imagesBaseUrl,i=n.imageSizes,s={},o=0,l=["posters","backdrops","profiles"];case 8:if(!(o<l.length)){e.next=36;break}if(c=l[o],u="original",!(c in t)){e.next=32;break}for(h=1/0,v=!0,f=!1,p=void 0,e.prev=16,m=i[c][Symbol.iterator]();!(v=(d=m.next()).done);v=!0)g=d.value,/^w\d+$/.test(g)&&(b=parseInt(g.substr(1)))>=t[c]&&b<h&&(u=g,h=b);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),f=!0,p=e.t0;case 24:e.prev=24,e.prev=25,v||null==m.return||m.return();case 27:if(e.prev=27,!f){e.next=30;break}throw p;case 30:return e.finish(27);case 31:return e.finish(24);case 32:s[c]=a+u;case 33:o++,e.next=8;break;case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),H=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!0},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;Object(c.a)(this,e),this.tmdb=t,this.abortController=new AbortController,this.filter=n,this.onResultsReceived=r,this.posterWidth=a,this.loading=!1,this.generator=null,this.firstResults=!0}return Object(u.a)(e,[{key:"newSearch",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.stop(),this.firstResults=!0,this.generator=this.tmdb.searchMovies(e,{firstPage:0,posterWidth:this.posterWidth,signal:this.abortController.signal}),V(r,this.abortController.signal).then(function(){t.loadMore()}).catch(function(){})}},{key:"reachedEnd",value:function(){return null===this.generator}},{key:"loadMore",value:function(){var e=this;if(!this.loading&&!this.reachedEnd()){var t=this.generator.next(),r=this.generator;t.then(function(t){var n=t.value,a=t.done;if(e.generator===r&&(e.loading=!1,a&&(e.generator=null),n||a)){var i=n?n.filter(e.filter):[];if(i.length||a){var s=e.firstResults;e.firstResults=!1,e.onResultsReceived(i,s,a,null)}else e.load()}}),t.catch(function(t){e.generator!==r||t instanceof DOMException&&"AbortError"===t.name||(e.onResultsReceived([],e.firstResults,!1,t),e.loading=!1,console.error("Search failed: %o",t))})}}},{key:"stop",value:function(){this.loading=!1,this.generator=null,this.abortController.abort(),this.abortController=new AbortController}}]),e}();function ee(e){return e instanceof Array&&e.every(function(e){return"string"===typeof e})}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=new URL(e,r),i=!0,s=!1,o=void 0;try{for(var l,c=new URLSearchParams(t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,h=Object(L.a)(u,2),v=h[0],f=h[1];a.searchParams.set(v,f)}}catch(S){s=!0,o=S}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}var p=!0,m=!1,d=void 0;try{for(var g,b=new URLSearchParams(n)[Symbol.iterator]();!(p=(g=b.next()).done);p=!0){var w=g.value,y=Object(L.a)(w,2),k=y[0],x=y[1];a.searchParams.set(k,x)}}catch(S){m=!0,d=S}finally{try{p||null==b.return||b.return()}finally{if(m)throw d}}return a}var re=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={searchString:e.searchString||"",searchResults:[],moreSearchResultsAvailable:!1},r.searcher=new H(e.tmdbClient,r.receivedSearchResults.bind(Object(f.a)(r)),function(e){return!!e.poster},320*devicePixelRatio),r.loadMoreResults=r.loadMoreResults.bind(Object(f.a)(r)),r.searchInputOnChange=r.searchInputOnChange.bind(Object(f.a)(r)),r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.searcher.newSearch(this.state.searchString)}},{key:"searchInputOnChange",value:function(e){var t=e.target.value;this.setState({searchString:t}),this.searcher.newSearch(t,.35),this.props.searchStringChanged(t)}},{key:"loadMoreResults",value:function(){this.searcher.loadMore()}},{key:"componentWillUnmount",value:function(){this.searcher.stop()}},{key:"receivedSearchResults",value:function(e,t,r,n){this.setState(function(a){return{searchResults:t?e:[].concat(Object(o.a)(a.searchResults),Object(o.a)(e)),moreSearchResultsAvailable:!r&&!n}})}},{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("input",{type:"search",className:E.a.searchInput,value:this.state.searchString,onChange:this.searchInputOnChange,maxLength:"140",autoFocus:!0,placeholder:"Type the name of a movie..."}),a.a.createElement(M.a,{dataLength:this.state.searchResults.length,next:this.loadMoreResults,hasMore:this.state.moreSearchResultsAvailable,scrollThreshold:"600px",loader:a.a.createElement("p",{className:E.a.loadingText},"One second...")},a.a.createElement("ul",{className:E.a.filmList},this.state.searchResults.map(function(e,t){var r=e.id,n=e.title,i=e.poster,s=e.overview;return a.a.createElement("li",{key:r},a.a.createElement(j.b,{to:"/movies/movie/"+r},a.a.createElement("h2",{title:n},n),a.a.createElement("img",{src:i,className:E.a.poster,alt:"Poster for "+n}),a.a.createElement(R.a,{line:4,element:"p",text:s,title:s,maxCalculateTimes:8})))}))))}}]),t}(a.a.Component);function ne(){return a.a.createElement("section",null,"Page Not Found")}var ae=r(28),ie=r.n(ae);function se(e){return a.a.createElement("section",null,a.a.createElement("h2",{className:ie.a.listTitle},e.listTitle),a.a.createElement("ul",{className:ie.a.movieList},e.items.map(function(e){var t=e.id,r=e.title,n=e.poster;return a.a.createElement(j.b,{to:"/movies/movie/"+t,key:t},a.a.createElement("li",null,a.a.createElement("p",null,r),a.a.createElement("img",{src:n,alt:"Poster"})))})))}var oe=r(13),le=r.n(oe),ce=r(12),ue="Movies.Lists",he="c4f2cf342c77c4f9252c1c663abb4937";function ve(e){return a.a.createElement("header",{className:le.a.header},a.a.createElement("img",{src:"/movies/favicon.svg",className:le.a.logo,alt:"Logo"}),a.a.createElement("h1",null,"Movies"),a.a.createElement(fe,{views:e.views}))}function fe(e){return a.a.createElement("nav",{className:le.a.headerMenu},e.views.map(function(e,t){var r=e.linkAddress,n=e.linkIcon,i=e.linkText,s=e.paths;return null!==r&&a.a.createElement("p",{key:t},a.a.createElement(j.c,{to:r,isActive:function(e,t){var r=t.pathname;return!!Object(ce.e)(r,{path:s,exact:!0,strict:!1})},activeClassName:le.a.activeLink,exact:!0},a.a.createElement("img",{src:n,alt:i})))}))}var pe=function(e){function t(e){var r;return Object(c.a)(this,t),(r=Object(h.a)(this,Object(v.a)(t).call(this,e))).tmdbClientAbortController=new AbortController,r.tmdbClient=new Q(he,r.tmdbClientAbortController.signal,"en"),r.state={lists:JSON.parse(localStorage.getItem(ue))||{favourites:[],watchlist:[]},movieDetails:null},r.loadMovieDetails=r.loadMovieDetails.bind(Object(f.a)(r)),r.movieId=null,r.views=[{linkAddress:"/movies/",linkIcon:d.a,linkText:"Search",paths:["/movies/","/movies/search/:searchString?"],render:function(e){return a.a.createElement(re,{tmdbClient:r.tmdbClient,searchString:e.match.params.searchString,searchStringChanged:function(t){e.history.replace("/movies/search/"+encodeURIComponent(t))}})}},{linkAddress:null,linkIcon:null,linkText:null,paths:["/movies/movie/:movieId"],render:function(e){return a.a.createElement(S,{movieDetails:r.state.movieDetails,movieId:Number(e.match.params.movieId),loadMovieDetails:r.loadMovieDetails,inFavourites:!!r.state.movieDetails&&!!r.state.lists.favourites.find(function(e){return e.id===r.state.movieDetails.id}),inWatchlist:!!r.state.movieDetails&&!!r.state.lists.watchlist.find(function(e){return e.id===r.state.movieDetails.id}),addToList:function(e){r.state.movieDetails&&r.addMovieToList(e,r.state.movieDetails)},removeFromList:function(e){r.state.movieDetails&&r.removeMovieFromList(e,r.state.movieDetails.id)}})}},{linkAddress:"/movies/watchlist",linkIcon:y.a,linkText:"Watchlist",paths:["/movies/watchlist"],render:function(e){return a.a.createElement(se,{listTitle:"Watchlist",items:r.state.lists.watchlist})}},{linkAddress:"/movies/favourites",linkIcon:b.a,linkText:"Favourites",paths:["/movies/favourites"],render:function(e){return a.a.createElement(se,{listTitle:"Favourites",items:r.state.lists.favourites})}},{linkAddress:null,linkIcon:null,linkText:null,paths:null,render:ne}],r.onStorage=r.onStorage.bind(Object(f.a)(r)),window.addEventListener("storage",r.onStorage),r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.tmdbClientAbortController.abort(),window.removeEventListener("storage",this.onStorage)}},{key:"onStorage",value:function(e){var t=e.key,r=e.storageArea,n=e.newValue;r===localStorage&&t===ue&&this.setState({lists:JSON.parse(n)})}},{key:"loadMovieDetails",value:function(e){var t=this;this.setState({movieDetails:null}),this.movieId=e,this.loadMovieDetailsAbortController=new AbortController;var r=this.loadMovieDetailsAbortController.signal;this.tmdbClient.getMovieDetails(e,{posters:400*devicePixelRatio,backdrops:1920*devicePixelRatio},r).then(function(r){t.movieId===e&&t.setState({movieDetails:r})})}},{key:"modifyList",value:function(e,t){this.setState(function(r){var n=r.lists,a=Object(l.a)({},n);return a[e]=Object(o.a)(a[e]),t(a[e]),localStorage.setItem(ue,JSON.stringify(a)),{lists:a}})}},{key:"addMovieToList",value:function(e,t){var r=t.id,n=t.title,a=t.poster;this.modifyList(e,function(e){if(!e.find(function(e){return e.id===r})){var t=e.findIndex(function(e){return-1===n.localeCompare(e.title)});-1===t&&(t=e.length),e.splice(t,0,{id:r,title:n,poster:a})}})}},{key:"removeMovieFromList",value:function(e,t){this.modifyList(e,function(e){var r=e.findIndex(function(e){return e.id===t});-1!==r&&e.splice(r,1)})}},{key:"render",value:function(){return a.a.createElement(j.a,null,a.a.createElement("div",{className:le.a.app},a.a.createElement(ve,{views:this.views}),a.a.createElement("main",{className:le.a.main},a.a.createElement(ce.c,null,this.views.map(function(e,t){var r=e.paths,n=e.render;return a.a.createElement(ce.a,{key:t,path:r,exact:!0,render:n})})))))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.aa8f0638.chunk.js.map